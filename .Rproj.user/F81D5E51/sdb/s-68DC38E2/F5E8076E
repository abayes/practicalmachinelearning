{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Course Project\"\nauthor: \"Anna Bayes\"\ndate: \"August 15, 2016\"\noutput: html_document\n---\n\n```{r setup, include=FALSE}\nsetwd(\"//cvgfnp004/cincinnati/home/MyDocs/DataScienceCert/08-Practical Machine Learning/Course Project\")\nlibrary(caret)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(rattle)\nlibrary(parallel)\nlibrary(doParallel)\n\ndata <- read.csv(\"pml-training.csv\")\nset.seed(100)\ninTrain <- createDataPartition(y = data$classe, p = .60, list = F)\n\ntraining <- data[inTrain,]\ntesting <- data[-inTrain,]\n\n```\n\n```{r code, include=FALSE}\n# Isolate the predictor columns\nrestrict_data <- function(data) {\n  # Make the columns numeric\n  data[8:159] <- apply(data[8:159], 2, function(x) suppressWarnings(as.numeric(as.character(x))))\n  # Remove all the columns with NA values\n  col_keep <- apply(data, 2, function(x) !any(is.na(x)))\n  # Remove identifier columns and class\n  col_keep[c(1:7, 160)] <- FALSE\n  col_keep <<- which(col_keep)\n  data[,col_keep]\n}\n\n### Build Model\nx <- restrict_data(training)\ny <- training[,160]\n\n# Parallel processing source: https://github.com/lgreski/datasciencectacontent/blob/master/markdown/pml-randomForestPerformance.md\ncluster <- makeCluster(detectCores() - 1) # convention to leave 1 core for OS\nregisterDoParallel(cluster)\n\n# Set control parameters for cross-validation and parallel processing\nfitControl <- trainControl(method = \"cv\",\n                           number = 10,\n                           allowParallel = TRUE)\n\n# Run model\nmod <- train(x,y, method=\"rf\",data=training,trControl = fitControl)\n\nstopCluster(cluster)\n\n### Test Model\ntestpred <- predict(mod, testing[,col_keep])\ntestcm <- confusionMatrix(testpred, testing$classe)\n```\n\n## Background\n\nThis model seeks to identify whether or not the a Unilateral Dumbbell Bicep Curl was performed correctly using data from accelerometers located on the participant's belt, forearm, arm, and dumbbell. There are 5 classes available. Class A corresponds to performing the exercise correctly. Classes B, C, D, and E correspond to common mistakes.\n\n## Data Selection \n\nThe original data was split into a training and testing set, with 60% of the data used for training. Some exploratory data analysis was performed on the training data to identify features to include in the model. The data contained 160 columns. 7 columns appeared to be identifiers, 100 of the columns contained missing values, 1 column was the actual class. This left 52 of the columns to be used to build the model. These columns all contained measurements from the various accelometers and contained no null values. These 52 columns were all used to build the model.\n\n```{r, echo=FALSE}\nstr(x)\n```\n\n## Model\n\nThe model will need to be a classification model. The Random Forest is a very accurate model type that can be used for classification tasks and while it is computationally intensive, it can also take advantage of parallel processing, which I found to be necessary.\n\nWhile the Random Forest is one of the most accurate models, it can lead to overfitting, especially if it is not cross-validated. This model was built using the train function in the caret package which can include cross validation as part of the function. As part of the control parameters, this model was built using k-fold cross-validation with 10 folds. \n\n```{r, echo=FALSE}\nmod$finalModel\nmod$resample\n\n```\n\n## Validation\n\nThe expected out of sample error rate can be found by running the model on the 40% of the original data that was held out for testing. Using 1 - Accuracy as the error rate, the out of sample error rate can be estimated as `r 1- testcm$overall[1]` for this model\n\n\n```{r, echo=FALSE}\ntestcm\n\n```\n",
    "created" : 1471379876383.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1708657606",
    "id" : "F5E8076E",
    "lastKnownWriteTime" : 1471379345,
    "last_content_update" : 1471379345,
    "path" : "~/DataScienceCert/08-Practical Machine Learning/Course Project/Course Project.Rmd",
    "project_path" : "Course Project.Rmd",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}